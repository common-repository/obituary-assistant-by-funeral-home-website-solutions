var $jscomp={scope:{},findInternal:function(a,h,f){a instanceof String&&(a=String(a));for(var k=a.length,e=0;e<k;e++){var m=a[e];if(h.call(f,m,e,a))return{i:e,v:m}}return{i:-1,v:void 0}}};$jscomp.defineProperty="function"==typeof Object.defineProperties?Object.defineProperty:function(a,h,f){if(f.get||f.set)throw new TypeError("ES3 does not support getters and setters.");a!=Array.prototype&&a!=Object.prototype&&(a[h]=f.value)};
$jscomp.getGlobal=function(a){return"undefined"!=typeof window&&window===a?a:"undefined"!=typeof global&&null!=global?global:a};$jscomp.global=$jscomp.getGlobal(this);$jscomp.polyfill=function(a,h,f,k){if(h){f=$jscomp.global;a=a.split(".");for(k=0;k<a.length-1;k++){var e=a[k];e in f||(f[e]={});f=f[e]}a=a[a.length-1];k=f[a];h=h(k);h!=k&&null!=h&&$jscomp.defineProperty(f,a,{configurable:!0,writable:!0,value:h})}};
$jscomp.polyfill("Array.prototype.find",function(a){return a?a:function(a,f){return $jscomp.findInternal(this,a,f).v}},"es6-impl","es3");
(function(a){function h(b,c,d,g){var l=null!=b?(Math.round(100*b)/100).toFixed(2):"",e=a(".florist-one-flower-delivery-plant-a-tree-select-your-own-price").text(),f=isNaN(e),h=a("#fws-trees-calculate-msg"),k='<div class="alert alert-danger lh-base" role="alert">We\u2019re sorry but the minimum number of trees that can be planted is '+g+"</div>",m=a("#florist-one-flower-delivery-view-modal").hasClass("show")?"":'data-bs-toggle="modal"',l=' <p class="fs-5 florist-one-flower-delivery-plant-a-tree-select-your-own-price">$'+
l+'</p><button type="button" data-checkout="show" href="#" class="f1fd_primary florist-one-flower-delivery-add-to-cart btn mt-3" '+m+' data-bs-target="#florist-one-flower-delivery-view-modal" id="plant-a-tree-add-to-cart2">Add To Cart <svg viewBox="0 0 24 24" width="18" height="18" stroke="currentColor" stroke-width="2" fill="currentColor" stroke-linecap="round" stroke-linejoin="round" class="css-i6dzq1"><circle cx="9" cy="21" r="1"></circle><circle cx="20" cy="21" r="1"></circle><path d="M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"></path></svg></button>';
g=c<parseInt(g)?k:d?l:f?e:"";h.html(g);d&&a("#plant-a-tree-add-to-cart2").attr("data-number",c).attr("data-price",b).attr("data-name","Plant "+c+" Trees").attr("data-code","Plant "+c+" Trees")}function f(b,c,d,g){var l=0;4<c&&12>c?l=10:11<c&&30>c?l=8.33:29<c&&(l=8);isNaN(c)||c<b?d.focus():(l={action:"getTreesTotal",code:"TREES",number:c,price:(c*l).toFixed(2),client_id:a("#client_id").val()},g?jQuery.post(e+"?_r="+Math.random(),l,function(a,b){d.attr("data-price",a);d.attr("data-number",c);d.attr("data-code",
"Plant-"+c+"-Trees");d.attr("data-name","Plant "+c+" Trees")}):jQuery.post(e+"?_r="+Math.random(),l,function(a,d){h(a,c,!0,b)},"html"))}function k(b){console.log(b);var c={clientKey:a("#florist-one-flower-delivery-payment-client-key").val(),apiLoginID:a("#florist-one-flower-delivery-payment-username").val()},d={};d.cardNumber=a("#florist-one-flower-delivery-payment-credit-card-number").val();d.month=a("#florist-one-flower-delivery-payment-expiration-month").val();d.year=a("#florist-one-flower-delivery-payment-expiration-year").val();
d.cardCode=a("#florist-one-flower-delivery-payment-security-code").val();b=a.grep(b,function(a){return"florist-one-flower-delivery-payment-credit-card-number"!=a.name&&"florist-one-flower-delivery-payment-expiration-month"!=a.name&&"florist-one-flower-delivery-payment-expiration-year"!=a.name&&"florist-one-flower-delivery-payment-security-code"!=a.name&&"florist-one-flower-delivery-payment-username"!=a.name&&"florist-one-flower-delivery-payment-client-key"!=a.name});console.log(b);var g={};g.authData=
c;g.cardData=d;Accept.dispatchData(g,function(c){if("Ok"==c.messages.resultCode)a("#florist-one-flower-delivery-payment-token").val(c.opaqueData.dataValue),c="TREES"!=a("#florist-one-flower-delivery-product-product-type").val(),t(b,c,a("#florist-one-flower-delivery-payment-order-total").val(),a("#florist-one-flower-delivery-payment-token").val());else{c=c.messages.message;a(".floristone-checkout-errors").remove();var d="<p>Please check your credit card information</p>",d=d+"<ul>";a.each(c,function(){d+=
"<li>"+this.text+"</li>"});d+="</ul>";a(".checkout-form-continue-next-step").before('<div class="my-2 alert alert-danger floristone-checkout-errors">'+d+"</div>")}})}var e=oaInfo.ajax_url,m=!1;a(window).ready(function(){5==a("#client_type").val()||7==a("#client_type").val()?a("#florist-one-flower-delivery-menu-nav").remove():a("#florist-one-flower-delivery-menu-nav").removeClass("d-none");var b={action:"setFlowerSessionData",name:a("#florist-one-flower-delivery-recipient-name").val(),"tree-name-of-loved-one":a("#florist-one-flower-delivery-tree-certificate-name-of-loved-one").val(),
institution:a("#florist-one-flower-delivery-recipient-institution").val(),address1:a("#florist-one-flower-delivery-recipient-address-1").val(),address2:a("#florist-one-flower-delivery-recipient-address-2").val(),city:a("#florist-one-flower-delivery-recipient-city").val(),state:a("#florist-one-flower-delivery-recipient-state").val(),zip:a("#florist-one-flower-delivery-recipient-postal-code").val(),country:a("#florist-one-flower-delivery-recipient-country").val(),phone:a("#florist-one-flower-delivery-recipient-phone").val(),
facility_id:a("#florist-one-flower-delivery-facility-id").val(),obit_id:a("#obit_id").val(),random:Math.random()},c=JSON.parse(window.localStorage.getItem("chekoutInfo"));null!=c&&jQuery.each(c,function(a,c){b[a]=c});jQuery.post(e+"?_r="+Math.random(),b);jQuery.post(e+"?_r="+Math.random(),{action:"getCartCount",random:Math.random()},function(a,b){jQuery("#florist-one-cart-count").html(a)},"html");a("#florist-one-flower-delivery-view-modal").on("shown.bs.modal",function(b){a("#florist-one-flower-delivery-view-modal").find(".modal-header-text").html("").text(b.relatedTarget.text);
(a(b.relatedTarget).hasClass("florist-one-flower-delivery-menu-cart-button")||a(b.relatedTarget).hasClass("florist-one-flower-delivery-add-to-cart"))&&a(".modal-header-text").html(jQuery(".florist-one-flower-delivery-menu-cart-button p").text());"florist-one-flower-delivery-menu-link-99"==b.relatedTarget.id?a("#florist-one-flower-delivery-view-modal").find(".modal-footer").hide():a("#florist-one-flower-delivery-view-modal").find(".modal-footer").show();a(".checkout-form").is(":visible")?a("#florist-one-flower-delivery-view-modal-close").hide():
a("#florist-one-flower-delivery-view-modal-close").show()});a("#florist-one-flower-delivery-view-modal").on("hide.bs.modal",function(b){a(".checkout-form").is(":visible")&&u();jQuery.post(e+"?_r="+Math.random(),{action:"getCartCount",random:Math.random()},function(a,b){jQuery("#florist-one-cart-count").html(a)},"html");a("#florist-one-flower-delivery-view-modal").find(".modal-body").html("")});if(a(".florist-one-flower-delivery-menu").get(0)){5!=a("#client_type").val()&&a(".florist-one-flower-delivery-ssl-warning").css("display",
"block");c=a(document).find("title").text();if(n("viewitem"))var d={action:"getProduct",code:n("viewitem"),random:Math.random()};else if(n("buyitem"))d={action:"addToCart",code:n("buyitem"),random:Math.random()};else if(a(".florist-one-flower-delivery-container").attr("data-def_cat"))d="cart"!=a(".florist-one-flower-delivery-container").attr("data-def_cat")?{action:"getProducts",category:a(".florist-one-flower-delivery-container").attr("data-def_cat"),page:1,random:Math.random()}:{action:"getCart",
random:Math.random()};else if(n("revieworder"))m=!0,d={action:"checkout",page:4,formdata:b,obituary:a("#fhws-main-obit").is(":visible")?1:0,validated:null,random:Math.random()};else if(n("orderno")){var g={order_id:n("orderno")};q(5,g)}else d=1==n("show_trees")||5==a("#client_type").val()||7==a("#client_type").val()?{action:"getTree",code:"TREES",random:Math.random()}:{action:"getProducts",category:a(".florist-one-flower-delivery-container").attr("data-def_cat")?a(".florist-one-flower-delivery-container").attr("data-def_cat"):
"default",page:1,random:Math.random()};History.pushState(d,c,"")}});a(document).on("click","a.florist-one-flower-delivery-menu-link",function(b){b.preventDefault();b={action:"getProducts",category:a(this).attr("data-category"),page:a(this).attr("data-page")};History.pushState(b,"","")});a(document).on("input","#florist-one-flower-delivery-plant-a-tree-select-your-own",function(b){h(null,this.value,!1,a(this).attr("min"))});a(document).on("change","#florist-one-flower-delivery-recipient-country",function(b){function c(b,
c,e){b=a("."+b);b.removeClass("fhws-hide-state");"hide"==c&&b.addClass("fhws-hide-state");a(e).val("");a("#florist-one-flower-delivery-recipient-postal-code").val("")}switch(this.value){case "CA":c("fhws-country-rec-ca","show","#florist-one-flower-delivery-recipient-state");c("fhws-country-rec-us","hide","#florist-one-flower-delivery-recipient-state");a("#florist-one-flower-delivery-recipient-state").prop("disabled",!1);a("#florist-one-flower-delivery-recipient-postal-code").prop("disabled",!1);a("#florist-one-flower-delivery-recipient-state").prev().text("Province*");
a("#florist-one-flower-delivery-recipient-postal-code").attr("placeholder","Postal Code*").prev().text("Postal Code*");break;case "US":c("fhws-country-rec-ca","hide","#florist-one-flower-delivery-recipient-state"),c("fhws-country-rec-us","show","#florist-one-flower-delivery-recipient-state"),a("#florist-one-flower-delivery-recipient-state").prop("disabled",!1),a("#florist-one-flower-delivery-recipient-postal-code").prop("disabled",!1),a("#florist-one-flower-delivery-recipient-state").prev().text("State*"),
a("#florist-one-flower-delivery-recipient-postal-code").attr("placeholder","Zip Code*").prev().text("Zip Code*")}});a(document).on("change","#florist-one-flower-delivery-customer-country",function(b){function c(b,c,e){b=a("."+b);b.removeClass("fhws-hide-state");"hide"==c&&b.addClass("fhws-hide-state");a(e).val("");a("#florist-one-flower-delivery-customer-postal-code").val("")}switch(this.value){case "CA":c("fhws-country-ca","show","#florist-one-flower-delivery-customer-state");c("fhws-country-us",
"hide","#florist-one-flower-delivery-customer-state");a("#florist-one-flower-delivery-customer-state").prop("disabled",!1);a("#florist-one-flower-delivery-customer-postal-code").prop("disabled",!1);a("#florist-one-flower-delivery-customer-state").prev().text("Province*");a("#florist-one-flower-delivery-customer-postal-code").attr("placeholder","Postal Code*").prev().text("Postal Code*");a("#florist-one-flower-delivery-customer-state option:first").html("&#8212; Select &#8212;");break;case "US":c("fhws-country-ca",
"hide","#florist-one-flower-delivery-customer-state");c("fhws-country-us","show","#florist-one-flower-delivery-customer-state");a("#florist-one-flower-delivery-customer-state").prop("disabled",!1);a("#florist-one-flower-delivery-customer-postal-code").prop("disabled",!1);a("#florist-one-flower-delivery-customer-state").prev().text("State*");a("#florist-one-flower-delivery-customer-postal-code").attr("placeholder","Zip Code*").prev().text("Zip Code*");a("#florist-one-flower-delivery-customer-state option:first").html("&#8212; Select &#8212;");
break;default:c("fhws-country-ca","hide"),c("fhws-country-us","hide"),a("#florist-one-flower-delivery-customer-state").prop("disabled",!0),a("#florist-one-flower-delivery-customer-state").val(""),a("#florist-one-flower-delivery-customer-state").next().hasClass("alert-danger")&&a("#florist-one-flower-delivery-customer-state").next().remove(),a("#florist-one-flower-delivery-customer-postal-code").next().hasClass("alert-danger")&&a("#florist-one-flower-delivery-customer-postal-code").next().remove(),
a("#florist-one-flower-delivery-customer-postal-code").prop("disabled",!1),a("#florist-one-flower-delivery-customer-state").prev().text("State"),a("#florist-one-flower-delivery-customer-postal-code").attr("placeholder","Postal Code").prev().text("Postal Code"),a("#florist-one-flower-delivery-customer-state option:first").html("&#8212; Not Required &#8212;")}});a(document).on("click",".country-trigger",function(b){a("#"+a(this).children(":first").next().attr("id")).is(":disabled")&&a("#florist-one-flower-delivery-customer-country").focus()});
a(document).on("keydown","#florist-one-flower-delivery-tree-certificate-sender-display-name, #florist-one-flower-delivery-tree-certificate-name-of-loved-one",function(b){59>a(this).length&&a(this).val(a(this).val().substring(0,59))});a(document).on("click",".florist-one-flower-delivery-plant-a-tree-select-your-own-calculate",function(b){b.preventDefault();f(a("#florist-one-flower-delivery-plant-a-tree-select-your-own").attr("min"),parseInt(a("#florist-one-flower-delivery-plant-a-tree-select-your-own").val().trim()),
a("#florist-one-flower-delivery-plant-a-tree-select-your-own"))});a(document).on("click","#florist-one-flower-delivery-tree-certificate-wrapper .trees-checkout",function(b){"INPUT"!=b.target.nodeName&&"TEXTAREA"!=b.target.nodeName||jQuery("input:radio").eq(a(".trees-checkout").index(this)).attr("checked",!0).trigger("click")});a(document).on("click","a.florist-one-flower-delivery-menu-plant-a-tree-link",function(b){"#"==a(this).attr("href")&&(b.preventDefault(),History.pushState({action:"getTree",
code:"TREES"},"",""))});a(document).on("click",".florist-one-flower-delivery-menu-link-more",function(b){b.preventDefault();b={action:"getProductsMore",category:a(this).attr("data-category"),page:a(this).attr("data-current-page"),random:Math.random()};parseInt(a(this).attr("data-current-page"))==parseInt(a(this).attr("data-pages"))&&a(this).remove();a(this).attr("data-current-page",parseInt(a(this).attr("data-current-page"))+1);History.pushState(b,"","")});a(document).on("click",".florist-one-flower-delivery-many-products-single-product",
function(b){if("#"==a(this).attr("href")&&"TREES"!=a(this).attr("data-code")){var c=a(this).attr("data-code");a("#checkout-tree-button").remove();b.preventDefault();History.pushState({action:"TREES"==c?"getTree":"getProduct",code:c,random:Math.random()},"","")}else"TREES"==a(this).attr("data-code")&&a("a[data-category=pt]").trigger("click")});a(document).on("change","input[type=radio][name=number_of_trees]",function(b){b.preventDefault();b=a("input[type=radio][name=number_of_trees]:checked").val();
f(0,b,a("#plant-a-tree-add-to-cart1"),!0);a("#fws-trees-calculate-msg-choose-number").html("")});a(document).on("click",".florist-one-flower-delivery-add-to-cart",function(b){"plant-a-tree-add-to-cart1"!=a(this).attr("id")||a("input[type=radio][name=number_of_trees]").length&&a("input[type=radio][name=number_of_trees]:checked").val()?("#"==a(this).attr("href")&&(m=!0,b.preventDefault(),b={action:"addToCart",code:a(this).attr("data-code"),num:a("#fws-add-to-cart-amount").is(":visible")?a("#fws-add-to-cart-amount").val():
1,random:Math.random()},History.pushState(b,"","")),jQuery.post(e+"?_r="+Math.random(),{action:"getCartCount",random:Math.random()},function(a,b){jQuery("#florist-one-cart-count").html(a)},"html")):(b.preventDefault(),a("input[type=radio][name=number_of_trees]").focus(),a("#florist-one-flower-delivery-view-modal").hide(),a("#fws-trees-calculate-msg-choose-number").html('<div class="alert alert-danger">Please choose an option above.</div>'))});a(document).on("click",".florist-one-flower-delivery-menu-cart-button",
function(a){a.preventDefault();History.pushState({action:"getCart",code:null,random:Math.random()},"","");jQuery.post(e+"?_r="+Math.random(),{action:"getCartCount",random:Math.random()},function(a,b){jQuery("#florist-one-cart-count").html(a)},"html")});a(document).on("click","a.florist-one-flower-delivery-cart-remove-item",function(b){b.preventDefault();v(a(this).attr("data-code"));jQuery.post(e+"?_r="+Math.random(),{action:"getCartCount",random:Math.random()},function(a,b){jQuery("#florist-one-cart-count").html(a)},
"html")});a(document).on("click","a.florist-one-flower-delivery-menu-customer-service-link",function(a){a.preventDefault();History.pushState({action:"getCustomerService"},"","")});a(document).on("focusout",".checkout-form",function(b){var c=b.target.name,d=b.target.value;"florist-one-flower-delivery-tree-certificate"==b.target.name?(b=null==JSON.parse(window.localStorage.getItem("chekoutInfo"))?{}:JSON.parse(window.localStorage.getItem("chekoutInfo")),b[c]=d,window.localStorage.setItem("chekoutInfo",
JSON.stringify(b))):"florist-one-flower-delivery-purchase-recognition-check"!=b.target.name&&(b=a(".checkout-form").validate(),b.element("#"+c),b=a(".checkout-form").data("validator"),b.check("#"+c)&&(b=null==JSON.parse(window.localStorage.getItem("chekoutInfo"))?{}:JSON.parse(window.localStorage.getItem("chekoutInfo")),b[c]=d,window.localStorage.setItem("chekoutInfo",JSON.stringify(b))))});a(document).on("change",'input[Id="florist-one-flower-delivery-purchase-recognition-check"]',function(b){b=
null==JSON.parse(window.localStorage.getItem("chekoutInfo"))?{}:JSON.parse(window.localStorage.getItem("chekoutInfo"));b["florist-one-flower-delivery-purchase-recognition-check"]=a(this).prop("checked")?"on":"";window.localStorage.setItem("chekoutInfo",JSON.stringify(b))});a(document).on("change",'input[Id="florist-one-flower-delivery-allow-substitutions-check"]',function(b){b=null==JSON.parse(window.localStorage.getItem("chekoutInfo"))?{}:JSON.parse(window.localStorage.getItem("chekoutInfo"));b["florist-one-flower-delivery-allow-substitutions-check"]=
a(this).prop("checked")?"on":"";window.localStorage.setItem("chekoutInfo",JSON.stringify(b))});a(document).on("click",".checkout-form-continue-next-step",function(b){b.preventDefault();a(".checkout-form").submit()});a(document).on("click",".florist-one-flower-delivery-checkout",function(b){m=!0;b.preventDefault();document.querySelector(".florist-one-flower-delivery-menu").scrollIntoView(!0);var c={action:"setFlowerSessionData",name:a("#florist-one-flower-delivery-recipient-name").val(),"tree-name-of-loved-one":a("#florist-one-flower-delivery-tree-certificate-name-of-loved-one").val(),
institution:a("#florist-one-flower-delivery-recipient-institution").val(),address1:a("#florist-one-flower-delivery-recipient-address-1").val(),address2:a("#florist-one-flower-delivery-recipient-address-2").val(),city:a("#florist-one-flower-delivery-recipient-city").val(),state:a("#florist-one-flower-delivery-recipient-state").val(),zip:a("#florist-one-flower-delivery-recipient-postal-code").val(),country:a("#florist-one-flower-delivery-recipient-country").val(),phone:a("#florist-one-flower-delivery-recipient-phone").val(),
facility_id:a("#florist-one-flower-delivery-facility-id").val(),obit_id:a("#obit_id").val(),random:Math.random()};b=JSON.parse(window.localStorage.getItem("chekoutInfo"));null!=b&&jQuery.each(b,function(a,b){c[a]=b});b={action:"checkout",page:4,formdata:jQuery.post(e+"?_r="+Math.random(),c),obituary:a("#fhws-main-obit").is(":visible")?1:0,validated:null,random:Math.random()};History.pushState(b,"","")});History.Adapter.bind(window,"statechange",function(){var b=History.getState();"getProducts"==b.data.action?
(a("#florist-one-flower-delivery-menu-nav").find("a").removeClass("active"),"default"!=b.data.category?a("a.florist-one-flower-delivery-menu-link[data-category='"+b.data.category+"']").addClass("active"):a("#florist-one-flower-delivery-menu-link-1").addClass("active"),w(b.data.category,b.data.page)):"getProductsMore"==b.data.action?x(b.data.category,b.data.page):"getProduct"==b.data.action?y(b.data.code):"getTree"==b.data.action?(a("#florist-one-flower-delivery-menu-nav").find("a").removeClass("active"),
a("a.florist-one-flower-delivery-menu-plant-a-tree-link").addClass("active"),z(b.data.code)):"addToCart"==b.data.action?(m?A(b.data.code,b.data.num):r(b.data.code),m=!1):"getCart"==b.data.action?r(b.data.code):"getCustomerService"==b.data.action?(a("#florist-one-flower-delivery-menu-nav").find("a").removeClass("active"),a("a.florist-one-flower-delivery-menu-customer-service-link").addClass("active"),B()):"checkout"==b.data.action&&(a("a.florist-one-flower-delivery-menu-link").removeClass("active"),
q(b.data.page,b.data.formdata,b.data.obituary,b.data.validated))});var w=function(b,c){var d={action:"getProducts",category:b,page:c,facility_id:a("#facility_id").val()};jQuery.post(e+"?_r="+Math.random(),d,function(a,b){p(a,b)},"html")},x=function(b,c){var d={action:"getProductsMore",category:b,page:c,facility_id:a("#facility_id").val()};jQuery.post(e+"?_r="+Math.random(),d,function(b,d){jQuery("#florist-one-flower-delivery-many-products-display").append(b);var e=c==a(".florist-one-flower-delivery-menu-link-more").attr("data-pages")?
a(".florist-one-flower-delivery-menu-link-more").attr("data-items-count"):a(".florist-one-flower-delivery-menu-link-more").attr("data-count")*c;jQuery("#florist-one-pagnation").text(e)},"html")},y=function(b){b={action:"getProduct",code:b,facility_id:a("#facility_id").val()};jQuery.post(e+"?_r="+Math.random(),b,function(a,b){jQuery("#florist-one-flower-delivery-view-modal").find(".modal-body").html(a)},"html");jQuery("#florist-one-flower-delivery-view-modal").find(".modal-body").html("")},z=function(b){b=
{action:"getTree",code:b,facility_id:a("#facility_id").val()};jQuery("#florist-one-flower-delivery-view-modal").hasClass("show")&&!jQuery("#fws-trees-container").is(":visible")?jQuery.post(e+"?_r="+Math.random(),b,function(a,b){jQuery("#florist-one-flower-delivery-view-modal").find(".modal-body").html(a);jQuery("#florist-one-flower-delivery-view-modal").find("#plant-a-tree-add-to-cart1").removeAttr("data-bs-toggle")},"html"):(jQuery("#florist-one-flower-delivery-view-modal").hasClass("show")&&a("#florist-one-flower-delivery-view-modal").modal("hide"),
jQuery.post(e+"?_r="+Math.random(),b,function(a,b){p(a,b)},"html"))},A=function(a,c){var b={action:"addToCart",code:a,num:c};jQuery("#florist-one-flower-delivery-view-modal").hasClass("show"),jQuery.post(e+"?_r="+Math.random(),b,function(a,b){jQuery("#florist-one-flower-delivery-view-modal").find(".modal-body").html(a)},"html")},v=function(a){a={action:"removeFromCart",code:a};jQuery("#florist-one-flower-delivery-view-modal").hasClass("show")&&jQuery.post(e+"?_r="+Math.random(),a,function(a,b){jQuery("#florist-one-flower-delivery-view-modal").find(".modal-body").html(a)},
"html")},r=function(a){jQuery.post(e+"?_r="+Math.random(),{action:"getCart",code:a},function(a,b){jQuery("#florist-one-flower-delivery-view-modal").find(".modal-body").html(a)},"html");jQuery("#florist-one-flower-delivery-view-modal").find(".modal-body").html("")},B=function(a){jQuery.post(e+"?_r="+Math.random(),{action:"getCustomerService"},function(a,b){p(a,b)},"html")},t=function(b,c,d,g){jQuery.post(e+"?_r="+Math.random(),{action:"placeOrder",formdata:b,flowers:c,ordertotal:d,token:g},function(b,
c){if(C(b)){var d=JSON.parse(b);a(".floristone-checkout-errors").remove();var e="<p>There are some issues with your order:</p>",e=e+"<ul>";a.each(d,function(){e+="<li>"+this+"</li>"});e+="</ul>";a(".checkout-form-continue-next-step").before('<div class="my-2 alert alert-danger floristone-checkout-errors">'+e+"</div>")}else p(b,c)})},C=function(a){"string"!=typeof a&&(a=JSON.stringify(a));try{return JSON.parse(a),!0}catch(c){return!1}},D=function(){jQuery.post(e+"?_r="+Math.random(),{action:"createPaymentLink"},
function(a,c){console.log(a);"undefined"!==typeof a.PAYMENT_LINK&&(window.location.href=a.PAYMENT_LINK)},"json")},q=function(b,c,d,g){c={action:"checkout",page:b,formdata:c,obituary:a("#fhws-main-obit").is(":visible")?1:0,validated:g};jQuery.post(e+"?_r="+Math.random(),c,function(c,d){a("#florist-one-flower-delivery-view-modal").modal("hide");p(c,d,b);jQuery("#florist-one-flower-delivery-purchase-recognition-label").text(jQuery("#f1_purchase_recognition").val())},"html");if(5==jQuery("#client_type").val()||
7==a("#client_type").val())jQuery("#checkout-tree-button").remove(),jQuery(".florist-one-flower-delivery").before('<button type="button" id="checkout-tree-button" href="#" data-code="TREE" class="mb-3 btn-fws btn-dark florist-one-flower-delivery-many-products-single-product">Back to Plant a Tree</button>')},u=function(){var b={action:"setFlowerSessionData",name:a("#florist-one-flower-delivery-recipient-name").val(),"tree-name-of-loved-one":a("#florist-one-flower-delivery-tree-certificate-name-of-loved-one").val(),
institution:a("#florist-one-flower-delivery-recipient-institution").val(),address1:a("#florist-one-flower-delivery-recipient-address-1").val(),address2:a("#florist-one-flower-delivery-recipient-address-2").val(),city:a("#florist-one-flower-delivery-recipient-city").val(),state:a("#florist-one-flower-delivery-recipient-state").val(),zip:a("#florist-one-flower-delivery-recipient-postal-code").val(),country:a("#florist-one-flower-delivery-recipient-country").val(),phone:a("#florist-one-flower-delivery-recipient-phone").val(),
facility_id:a("#florist-one-flower-delivery-facility-id").val(),obit_id:a("#obit_id").val(),random:Math.random()},c=JSON.parse(window.localStorage.getItem("chekoutInfo"));null!=c&&jQuery.each(c,function(a,c){b[a]=c});c={action:"checkout",page:4,formdata:jQuery.post(e+"?_r="+Math.random(),b),obituary:a("#fhws-main-obit").is(":visible")?1:0,validated:null,random:Math.random()};History.pushState(c,"","")},p=function(b,c,d){a(".florist-one-flower-delivery").html(b);void 0!==d&&E()},E=function(){var b;
a(document).ready(function(){var c=a(".checkout-form");c.validate({rules:{"florist-one-flower-delivery-delivery-date":{required:!0},"florist-one-flower-delivery-tree-certificate":{required:!0},"florist-one-flower-delivery-tree-certificate-email-behalf-recipient-name":{required:{depends:function(){a(this).val(a(this).val().trim());return a("#florist-one-flower-delivery-tree-certificate-email-behalf").is(":checked")?!0:!1}},maxlength:100},"florist-one-flower-delivery-tree-certificate-email-behalf-recipient-email":{required:{depends:function(){a(this).val(a(this).val().trim());
return a("#florist-one-flower-delivery-tree-certificate-email-behalf").is(":checked")?!0:!1}},emailVer:!0,maxlength:100},"florist-one-flower-delivery-tree-certificate-email-behalf-message-to-recipient":{required:{depends:function(){a(this).val(a(this).val().trim());return!1}},maxlength:500},"florist-one-flower-delivery-tree-certificate-name-of-loved-one":{required:{depends:function(){a(this).val(a(this).val().trim());59>a(this).length&&a(this).val(a(this).val().substring(0,59));return!0}}},"florist-one-flower-delivery-tree-certificate-sender-display-name":{required:{depends:function(){a(this).val(a(this).val().trim());
59>a(this).length&&a(this).val(a(this).val().substring(0,59));return!0}}},"florist-one-flower-delivery-special-card-message":{required:{depends:function(){a(this).val(a(this).val().trim());return!0}},maxlength:200},"florist-one-flower-delivery-special-special-instructions":{required:{depends:function(){a(this).val(a(this).val().trim());return!1}},maxlength:100},"florist-one-flower-delivery-recipient-name":{required:{depends:function(){a(this).val(a(this).val().trim());return!0}},maxlength:100},"florist-one-flower-delivery-recipient-institution":{required:{depends:function(){a(this).val(a(this).val().trim());
return!1}},maxlength:100},"florist-one-flower-delivery-recipient-address-1":{required:{depends:function(){a(this).val(a(this).val().trim());return!0}},maxlength:100},"florist-one-flower-delivery-recipient-address-2":{required:{depends:function(){a(this).val(a(this).val().trim());return!1}},maxlength:100},"florist-one-flower-delivery-recipient-city":{required:{depends:function(){a(this).val(a(this).val().trim());return!0}},maxlength:100},"florist-one-flower-delivery-recipient-state":{required:!0,maxlength:2},
"florist-one-flower-delivery-recipient-country":{required:!0,maxlength:2},"florist-one-flower-delivery-recipient-postal-code":{required:{depends:function(){a(this).val(a(this).val().trim().toUpperCase());return!0}},maxlength:7,recipientZip:!0},"florist-one-flower-delivery-recipient-phone":{required:{depends:function(){a(this).val(a(this).val().trim());return!0}},maxlength:20,phoneNumber:!0},"florist-one-flower-delivery-customer-name":{required:{depends:function(){a(this).val(a(this).val().trim());
return!0}},maxlength:100},"florist-one-flower-delivery-customer-address-1":{required:{depends:function(){a(this).val(a(this).val().trim());return!0}},maxlength:100},"florist-one-flower-delivery-customer-address-2":{rrequired:{depends:function(){a(this).val(a(this).val().trim());return!1}},maxlength:100},"florist-one-flower-delivery-customer-city":{required:{depends:function(){a(this).val(a(this).val().trim());return!0}},maxlength:100},"florist-one-flower-delivery-customer-state":{required:!0,maxlength:2},
"florist-one-flower-delivery-customer-country":{required:!0,maxlength:2},"florist-one-flower-delivery-customer-phone":{required:{depends:function(){a(this).val(a(this).val().trim());return!0}},maxlength:20,phoneNumber:!0},"florist-one-flower-delivery-customer-email":{required:{depends:function(){a(this).val(a(this).val().trim());return!0}},maxlength:100,emailVer:!0},"florist-one-flower-delivery-customer-postal-code":{required:{depends:function(){var b=a("#florist-one-flower-delivery-customer-country").val();
if("CA"==b||"US"==b)return a(this).val(a(this).val().trim().toUpperCase()),!0;a(this).val(a(this).val().trim());return!1}},maxlength:15,customerZip:!0},"florist-one-flower-delivery-payment-credit-card-number":{required:!0,maxlength:16,creditCardNumber:!0},"florist-one-flower-delivery-payment-expiration-month":{required:!0,maxlength:2,CCExp:{month:"#florist-one-flower-delivery-payment-expiration-month",year:"#florist-one-flower-delivery-payment-expiration-year"}},"florist-one-flower-delivery-payment-security-code":{required:!0,
maxlength:4},"":{}},onkeyup:!1,onfocusout:function(b){a(b).hasClass("ofo")&&this.element(b)},onchange:!1,focusInvalid:!1,errorClass:"alert alert-danger w-100",invalidHandler:function(a,c){b=!0},showErrors:function(c,e){if(b){a(".floristone-checkout-errors").remove();var d="Please ensure you have entered the following: <br/><br/>";a.each(e,function(){var b=a("label[for='"+this.element.id+"']").text(),b=b.split("*"),c="",e=this.element.id.split("-");-1!==e.indexOf("customer")&&(c="Bill To ");-1!==e.indexOf("recipient")&&
(c="Deliver To ");d+=c+b[0]+"<br/>"});a(".checkout-form-continue-next-step").before('<div class="my-2 alert alert-danger floristone-checkout-errors">'+d+"</div>");b=!1}this.defaultShowErrors()},submitHandler:function(){if(a("#florist-one-flower-delivery-payment-credit-card-number").length){var b=c.serializeArray();k(b)}else b=jQuery("#florist-one-flower-delivery-purchase-recognition-check").prop("checked")?"on":"",b=c.serializeArray().concat({name:"florist-one-flower-delivery-purchase-recognition-check",
value:b}),b=jQuery("#florist-one-flower-delivery-allow-substitutions-check").prop("checked")?"on":"",b=c.serializeArray().concat({name:"florist-one-flower-delivery-allow-substitutions-check",value:b}),q(4,b,a("#fhws-main-obit").is(":visible")?1:0,!0),a("#international_tree").length?D():a(document).ajaxStop(function(){a("#fws-checkout-form-payment").trigger("click")})},errorPlacement:function(a,b){b.is(":radio")?a.insertBefore(b.parents("#florist-one-flower-delivery-tree-certificate-info")):a.insertAfter(b)},
messages:{"florist-one-flower-delivery-tree-certificate":{required:"Please select a delivery method."}}})})},n=function(a){var b=decodeURIComponent(window.location.search.substring(1)).split("&"),d,e;for(e=0;e<b.length;e++)if(d=b[e].split("="),d[0]===a)return void 0===d[1]?!0:d[1]};a(document).ready(function(){jQuery.validator.addMethod("phoneNumber",function(a,c){a=a.replace(/\s+/g,"");return this.optional(c)||a.match(/(.*?\d){10}/gm)},"Please specify a valid phone number");jQuery.validator.addMethod("customerZip",
function(a,c){var b=jQuery("#florist-one-flower-delivery-customer-country").val();if("CA"==b)return this.optional(c)||/(^[A-Za-z]{1}\d{1}[A-Za-z]{1} *\d{1}[A-Za-z]{1}\d{1}$)/.test(a);if("US"==b)return this.optional(c)||/(^\d{5}$)/.test(a);if("US"!=b&&"CA"!=b)return this.optional(c)||/(.*?)/.test(a)},function(){var a=jQuery("#florist-one-flower-delivery-customer-country").val();if("CA"==a)return"Please enter a valid Canadian postal code.";if("US"==a)return"Please enter a valid 5 digit zip code."});
jQuery.validator.addMethod("recipientZip",function(a,c){var b=jQuery("#florist-one-flower-delivery-recipient-country").val();if("CA"==b)return this.optional(c)||/(^[A-Za-z]{1}\d{1}[A-Za-z]{1} *\d{1}[A-Za-z]{1}\d{1}$)/.test(a);if("US"==b)return this.optional(c)||/(^\d{5}$)/.test(a)},function(){var a=jQuery("#florist-one-flower-delivery-recipient-country").val(),c;"CA"==a&&(c="Please enter a valid Canadian postal code.");"US"==a&&(c="Please enter a valid 5 digit zip code.");return c});jQuery.validator.addMethod("emailVer",
function(a,c){return this.optional(c)||/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(a)},"Please enter a valid email address");jQuery.validator.addMethod("CCExp",function(b,c,d){b=(new Date).getMonth()+1;var e=(new Date).getFullYear(),e=(e+"").substring(2,4),f=parseInt(a(d.month).val(),10);d=parseInt(a(d.year).val(),10);return this.optional(c)||d>e||d==e&&f>=b},"Your Credit Card Expiration date is invalid.");
jQuery.validator.addMethod("CCCVV2",function(b,c,d){b=a(d.cc_type).val();d=a(d.cc_cvv2).val();return this.optional(c)||"AX"==b&&4==d.length||"AX"!=b&&3==d.length},"Your CVV2 is invalid.");jQuery.validator.addMethod("creditCardNumber",function(a,c){var b=a.replace(/[^0-9]+/g,"");return this.optional(c)||/^.{15,16}$/.test(b)},"Please enter a valid credit card number.")}).ajaxStart(function(){jQuery("#florist-one-flower-delivery-loader").removeClass("d-none")}).ajaxStop(function(){jQuery("#florist-one-flower-delivery-loader").addClass("d-none")})})(jQuery);
