!function(t){"use strict";var c=oaInfo.ajax_url;oaInfo.partials;var i=function(e){switch(e){case"type":return t.cookie("o-s-t");case"user":return t.cookie("o-s-u");case"email":return t.cookie("o-s-e")}},l=function(){return void 0===t.cookie("o-s-t")||void 0===t.cookie("o-s-u")||void 0===t.cookie("o-s-e")?0:1},a=function(){t(".obituary-candle").each(function(e,n){t(this).removeClass("selected"),t(this).attr("src",t(this).attr("data-image-1"))}),t("input[name=obituary-candle-choice]").val("")};t(document).on("click",".input-new-condolence-add-candle",function(){t(".obituary-candles").css("display","block"),t(".input-new-condolence-add-candle").css("display","none"),t(".input-new-condolence-cancel-candle").css("display","block")}),t(document).on("click",".obituary-candle",function(){t(this).hasClass("selected")?(a(),0==t(".input-new-condolence").val().length&&t(".input-new-condolence-submit").addClass("d-none")):(a(),t(this).attr("src",t(this).attr("data-image-2")),t(this).addClass("selected"),t("input[name=obituary-candle-choice]").val(t(this).attr("data-candle-id")),t(".input-new-condolence-submit").removeClass("d-none"))}),t(document).ready(function(){!function(){t("#fhw-solutions-obituries-modal").on("show.bs.modal",function(e){if(0!=l())return e.preventDefault()}),t(".input-new-condolence-submit").click(function(e){var n;0==l()?t(".login_type").val("condolence"):(n={action:"obituary_assistant_add_condolence",obit_id:t("#obit_id").val(),type:i("type"),sender:i("user"),message:t(".input-new-condolence").val(),email:i("email"),celebration_type:t("input[name=obituary-candle-choice]").val(),"o-s-t":t.cookie("o-s-t"),"o-s-u":t.cookie("o-s-u"),"o-s-e":t.cookie("o-s-e")},jQuery.post(c,n,function(e,n){console.log(e),t(".obituary-condolences-display").html(e),t("h4.condolence_honor").html(t("input[name=condolence_honor]").val()),t(".condolence_counter").html(0<t(".list-group-item").length?" ("+t(".list-group-item").length+")":""),alert(t("#allow_condolences_message").val())},"html"),o(),a(),t(".input-new-condolence-cancel-candle").trigger("click"))}),t(".input-new-condolence").on("click keyup keydown keypress",function(){0<t(".input-new-condolence").val().length||t(".obituary-candle.selected").length?t(".input-new-condolence-submit").removeClass("d-none"):t(".input-new-condolence-submit").addClass("d-none")}),t("div.obituary-condolences-display").on("click",".obituary-delete-condolence",function(e){e.preventDefault();e={action:"obituary_assistant_delete_condolence",obit_id:t("#obit_id").val(),post_id:t(this).attr("data-p-i"),"o-s-t":t.cookie("o-s-t"),"o-s-u":t.cookie("o-s-u"),"o-s-e":t.cookie("o-s-e")};jQuery.post(c,e,function(e,n){t(".obituary-condolences-display").html(e),t("h4.condolence_honor").html(t("input[name=condolence_honor]").val()),t(".condolence_counter").html(0<t(".list-group-item").length?" ("+t(".list-group-item").length+")":"")},"html")});var o=function(){t(".input-new-condolence").val(""),t(".input-new-condolence-submit").addClass("d-none"),t("#captcha-wrapper").css("display","none"),t(".refreshButton").trigger("click")};t("div#obit_condolences").on("click",".refresh_condolence_button",function(e){e.preventDefault(),n()});var n=function(){var e={action:"obituary_assistant_refresh_condolences",obit_id:t("#obit_id").val(),"o-s-t":t.cookie("o-s-t"),"o-s-u":t.cookie("o-s-u"),"o-s-e":t.cookie("o-s-e")};jQuery.post(c,e,function(e,n){t(".obituary-condolences-display").html(e),t("h4.condolence_honor").html(t("input[name=condolence_honor]").val()),t(".condolence_counter").html(0<t(".list-group-item").length?" ("+t(".list-group-item").length+")":"")},"html")};t("h4.condolence_honor").html(t("input[name=condolence_honor]").val())}(),t("img.obituary-candle").bind("dragstart",function(e){e.preventDefault()}),t("textarea.input-new-condolence").bind("dragenter",function(e){e.preventDefault()}),t("textarea.input-new-condolence").bind("dragover",function(e){e.preventDefault()}),t("textarea.input-new-condolence").bind("dragdrop",function(e){e.preventDefault()})})}(jQuery);